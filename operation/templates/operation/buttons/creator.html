{% load tags %}

<form method="POST" action="" id="form_approve">
  {% csrf_token %}
<a href="{{ request.META.HTTP_REFERER }}" class="btn btn-lg btn-secondary">ย้อนกลับ</a>
<!-- button to generate pdf -->
<a href="#" target="_blank" class="btn btn-lg btn-primary">พิมพ์</a>

<!-- TODO: add condition to request open and close operation -->
{% if object.approve_status == "AP" %}
<a href="#" class="btn btn-lg btn-success">ขออนุมัติปิดงาน</a>

{% else %}
  
<button type="button" class="btn btn-lg btn-warning" id="request_approve">ขออนุมัติเปิดงาน</button>
</form>

{% endif %}

<script>
  // on ready
  $(document).ready(function () {
    $("#request_approve").click(function () {
      var url = `{% url 'operation:request_approve' pk=object.pk %}`;
      $("#form_approve").attr("action", url);
      $("#form_approve").submit();
    });
  });

</script>
